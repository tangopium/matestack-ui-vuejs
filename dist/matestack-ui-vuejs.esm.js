import{computed as e,inject as t}from"vue";var r={exports:{}},n=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}},i=n,s=Object.prototype.toString;function o(e){return"[object Array]"===s.call(e)}function a(e){return void 0===e}function p(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==s.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===s.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var d={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===s.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:p,isPlainObject:l,isUndefined:a,isDate:function(e){return"[object Date]"===s.call(e)},isFile:function(e){return"[object File]"===s.call(e)},isBlob:function(e){return"[object Blob]"===s.call(e)},isFunction:u,isStream:function(e){return p(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function e(){var t={};function r(r,n){l(t[n])&&l(r)?t[n]=e(t[n],r):l(r)?t[n]=e({},r):o(r)?t[n]=r.slice():t[n]=r}for(var n=0,i=arguments.length;n<i;n++)c(arguments[n],r);return t},extend:function(e,t,r){return c(t,(function(t,n){e[n]=r&&"function"==typeof t?i(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}},h=d;function m(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var f=function(e,t,r){if(!t)return e;var n;if(r)n=r(t);else if(h.isURLSearchParams(t))n=t.toString();else{var i=[];h.forEach(t,(function(e,t){null!=e&&(h.isArray(e)?t+="[]":e=[e],h.forEach(e,(function(e){h.isDate(e)?e=e.toISOString():h.isObject(e)&&(e=JSON.stringify(e)),i.push(m(t)+"="+m(e))})))})),n=i.join("&")}if(n){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e},g=d;function v(){this.handlers=[]}v.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},v.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},v.prototype.forEach=function(e){g.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var _=v,F=d,E=function(e){return!(!e||!e.__CANCEL__)},y=d,T=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},b=function(e,t,r,n,i){var s=new Error(e);return T(s,t,r,n,i)},N=b,w=d,k=w.isStandardBrowserEnv()?{write:function(e,t,r,n,i,s){var o=[];o.push(e+"="+encodeURIComponent(t)),w.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),w.isString(n)&&o.push("path="+n),w.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},I=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},R=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},S=d,D=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],x=d,C=x.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=x.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0},O=d,$=function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(N("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)},L=k,A=f,P=function(e,t){return e&&!I(t)?R(e,t):t},U=function(e){var t,r,n,i={};return e?(S.forEach(e.split("\n"),(function(e){if(n=e.indexOf(":"),t=S.trim(e.substr(0,n)).toLowerCase(),r=S.trim(e.substr(n+1)),t){if(i[t]&&D.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([r]):i[t]?i[t]+", "+r:r}})),i):i},j=C,z=b,V=function(e){return new Promise((function(t,r){var n=e.data,i=e.headers;O.isFormData(n)&&delete i["Content-Type"];var s=new XMLHttpRequest;if(e.auth){var o=e.auth.username||"",a=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.Authorization="Basic "+btoa(o+":"+a)}var p=P(e.baseURL,e.url);if(s.open(e.method.toUpperCase(),A(p,e.params,e.paramsSerializer),!0),s.timeout=e.timeout,s.onreadystatechange=function(){if(s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in s?U(s.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:n,config:e,request:s};$(t,r,i),s=null}},s.onabort=function(){s&&(r(z("Request aborted",e,"ECONNABORTED",s)),s=null)},s.onerror=function(){r(z("Network Error",e,null,s)),s=null},s.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(z(t,e,"ECONNABORTED",s)),s=null},O.isStandardBrowserEnv()){var l=(e.withCredentials||j(p))&&e.xsrfCookieName?L.read(e.xsrfCookieName):void 0;l&&(i[e.xsrfHeaderName]=l)}if("setRequestHeader"in s&&O.forEach(i,(function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete i[t]:s.setRequestHeader(t,e)})),O.isUndefined(e.withCredentials)||(s.withCredentials=!!e.withCredentials),e.responseType)try{s.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&s.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){s&&(s.abort(),r(e),s=null)})),n||(n=null),s.send(n)}))},q=d,H=function(e,t){y.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))},B={"Content-Type":"application/x-www-form-urlencoded"};function M(e,t){!q.isUndefined(e)&&q.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var X,J={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(X=V),X),transformRequest:[function(e,t){return H(t,"Accept"),H(t,"Content-Type"),q.isFormData(e)||q.isArrayBuffer(e)||q.isBuffer(e)||q.isStream(e)||q.isFile(e)||q.isBlob(e)?e:q.isArrayBufferView(e)?e.buffer:q.isURLSearchParams(e)?(M(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):q.isObject(e)?(M(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};J.headers={common:{Accept:"application/json, text/plain, */*"}},q.forEach(["delete","get","head"],(function(e){J.headers[e]={}})),q.forEach(["post","put","patch"],(function(e){J.headers[e]=q.merge(B)}));var W=J,K=d,G=function(e,t,r){return F.forEach(r,(function(r){e=r(e,t)})),e},Q=E,Y=W;function Z(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var ee=d,te=function(e,t){t=t||{};var r={},n=["url","method","data"],i=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function a(e,t){return ee.isPlainObject(e)&&ee.isPlainObject(t)?ee.merge(e,t):ee.isPlainObject(t)?ee.merge({},t):ee.isArray(t)?t.slice():t}function p(n){ee.isUndefined(t[n])?ee.isUndefined(e[n])||(r[n]=a(void 0,e[n])):r[n]=a(e[n],t[n])}ee.forEach(n,(function(e){ee.isUndefined(t[e])||(r[e]=a(void 0,t[e]))})),ee.forEach(i,p),ee.forEach(s,(function(n){ee.isUndefined(t[n])?ee.isUndefined(e[n])||(r[n]=a(void 0,e[n])):r[n]=a(void 0,t[n])})),ee.forEach(o,(function(n){n in t?r[n]=a(e[n],t[n]):n in e&&(r[n]=a(void 0,e[n]))}));var l=n.concat(i).concat(s).concat(o),u=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return ee.forEach(u,p),r},re=d,ne=f,ie=_,se=function(e){return Z(e),e.headers=e.headers||{},e.data=G(e.data,e.headers,e.transformRequest),e.headers=K.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),K.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||Y.adapter)(e).then((function(t){return Z(e),t.data=G(t.data,t.headers,e.transformResponse),t}),(function(t){return Q(t)||(Z(e),t&&t.response&&(t.response.data=G(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},oe=te;function ae(e){this.defaults=e,this.interceptors={request:new ie,response:new ie}}ae.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=oe(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[se,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},ae.prototype.getUri=function(e){return e=oe(this.defaults,e),ne(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},re.forEach(["delete","get","head","options"],(function(e){ae.prototype[e]=function(t,r){return this.request(oe(r||{},{method:e,url:t,data:(r||{}).data}))}})),re.forEach(["post","put","patch"],(function(e){ae.prototype[e]=function(t,r,n){return this.request(oe(n||{},{method:e,url:t,data:r}))}}));var pe=ae;function le(e){this.message=e}le.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},le.prototype.__CANCEL__=!0;var ue=le,ce=ue;function de(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new ce(e),t(r.reason))}))}de.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},de.source=function(){var e;return{token:new de((function(t){e=t})),cancel:e}};var he=de,me=d,fe=n,ge=pe,ve=te;function _e(e){var t=new ge(e),r=fe(ge.prototype.request,t);return me.extend(r,ge.prototype,t),me.extend(r,t),r}var Fe=_e(W);Fe.Axios=ge,Fe.create=function(e){return _e(ve(Fe.defaults,e))},Fe.Cancel=ue,Fe.CancelToken=he,Fe.isCancel=E,Fe.all=function(e){return Promise.all(e)},Fe.spread=function(e){return function(t){return e.apply(null,t)}},Fe.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError},r.exports=Fe,r.exports.default=Fe;var Ee=r.exports;const ye={all:Te=Te||new Map,on:function(e,t){var r=Te.get(e);r?r.push(t):Te.set(e,[t])},off:function(e,t){var r=Te.get(e);r&&(t?r.splice(r.indexOf(t)>>>0,1):Te.set(e,[]))},emit:function(e,t){var r=Te.get(e);r&&r.slice().map((function(e){e(t)})),(r=Te.get("*"))&&r.slice().map((function(r){r(e,t)}))}};var Te;const be={$on:(...e)=>ye.on(...e),$once:(...e)=>ye.once(...e),$off:(...e)=>ye.off(...e),$emit:(...e)=>ye.emit(...e)},Ne={props:["props","params","matestack-ui-vuejs-ref"],computed:{vc:function(){return this}},methods:{getRefs:function(){var e={},t=this.props.component_uid,r=this.getTemplateElement().querySelectorAll("[matestack-ui-vuejs-ref]");for(let n in r){let i=r[n];if(i.getAttribute){let r=i.getAttribute("matestack-ui-vuejs-ref");r.startsWith(t)&&(e[r.replace(t+"-","")]=i)}}return e},getTemplateElement:function(){return document.getElementById("uid-"+this.props.component_uid)},getElement:function(){return this.getTemplateElement().firstChild},registerEvents:function(e,t){null!=e&&e.split(",").forEach((e=>be.$on(e.trim(),t)))},removeEvents:function(e,t){null!=e&&e.split(",").forEach((e=>be.$off(e.trim(),t)))},emitScopedEvent:function(e,t={}){be.$emit(this.props.component_uid+"_"+e,t)},registerScopedEvent:function(e,t,r=this.props.component_uid){be.$on(r+"_"+e,t)},removeScopedEvent:function(e,t,r=this.props.component_uid){be.$off(r+"_"+e,t)},getXcsrfToken:function(){if(document.getElementsByName("csrf-token")[0])return document.getElementsByName("csrf-token")[0].getAttribute("content")}}},we={inlineTemplate:'<slot :vc="vc"></slot>'},ke={mixins:[Ne],template:we.inlineTemplate,props:["appConfig","params"],data:function(){return{pageTemplate:null,pageLoading:!1,currentPathName:document.location.pathname,currentSearch:document.location.search,currentOrigin:document.location.origin}},provide:function(){return{pageTemplate:e((()=>this.pageTemplate)),pageLoading:e((()=>this.pageLoading)),currentPathName:e((()=>this.currentPathName)),currentSearch:e((()=>this.currentSearch)),currentOrigin:e((()=>this.currentOrigin)),appNavigateTo:this.navigateTo,setPageLoading:this.setPageLoading}},mounted:function(){const e=this;window.addEventListener("popstate",(t=>{this.isNavigatingToAnotherPage({origin:e.currentOrigin,pathName:e.currentPathName,search:e.currentSearch},document.location)&&(be.$emit("page_loading_triggered",document.location.pathname+document.location.search),e.pageLoading=!0,e.navigateTo({url:document.location.pathname+document.location.search,backwards:!0}))}))},methods:{navigateTo({url:e,backwards:t}){const r=this;if(r.pageLoading=!0,be.$emit("page_loading",e),window.history.pushState)return new Promise(((n,i)=>{Ee({method:"get",url:e,headers:{"X-CSRF-Token":r.getXcsrfToken()},params:{only_page:!0}}).then((function(i){t?window.history.replaceState({matestackApp:!0,url:e},null,e):window.history.pushState({matestackApp:!0,url:e},null,e),setTimeout((function(){n(i.data),r.pageTemplate=i.data,r.setCurrentLocation({path:e.split("?")[0],search:document.location.search,origin:document.location.origin}),r.pageLoading=!1,r.pageScrollTop(),be.$emit("page_loaded",e)}),5)})).catch((function(e){setTimeout((function(){n(e),be.$emit("page_loading_error",e)}),5)}))}));document.location.href=e},setPageLoading(e){this.pageLoading=e},setCurrentLocation(e){this.currentPathName=e.path,this.currentSearch=e.search,this.currentOrigin=e.origin},pageScrollTop(){const e=function(t){return null==t?null:t.scrollHeight>t.clientHeight?t:e(t.parentNode)};var t=e(document.getElementsByClassName("matestack-page-root")[0]);t&&(t.scrollTop=0)},isNavigatingToAnotherPage:(e,t)=>e.pathName!==t.pathname||e.origin!==t.origin||e.search!==t.search}},Ie={mixins:[Ne],template:we.inlineTemplate,data:function(){return{}},inject:["pageTemplate","pageLoading"],computed:{asyncPageTemplate:function(){return this.pageTemplate},loading:function(){return this.pageLoading}}},Re={template:'<component :is="dynamicComponent" :vc="vc" :template="template" />',props:["vc","template"],computed:{dynamicComponent:function(){return{props:["vc","template"],template:`${this.template||"<div></div>"}`}}}};var Se=(e,t,r)=>{r||(r=window.location.href);let n,i=new RegExp(`([?&])${e}=.*?(&|#|$)(.*)`,"gi");if(i.test(r))return null!=t?r.replace(i,`$1${e}=${t}$2$3`):(n=r.split("#"),r=n[0].replace(i,"$1$3").replace(/(&|\?)$/,""),void 0!==n[1]&&null!==n[1]&&(r+=`#${n[1]}`),r);if(null!=t){const i=-1!==r.indexOf("?")?"&":"?";return n=r.split("#"),r=`${n[0]}${i}${e}=${t}`,void 0!==n[1]&&null!==n[1]&&(r+=`#${n[1]}`),r}return r},De=(e,t)=>{t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");const r=new RegExp(`[?&]${e}(=([^&#]*)|&|#|$)`).exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null},xe=()=>{const e=window.location.search.substring(1);if(0===e.length)return{};return JSON.parse(`{"${e.replace(/&/g,'","').replace(/=/g,'":"')}"}`,((e,t)=>""===e?t:decodeURIComponent(t)))};const Ce={mixins:[Ne],template:we.inlineTemplate,data:function(){return{currentLimit:null,currentOffset:null,currentFilteredCount:null,currentBaseCount:null}},methods:{next:function(){if(this.currentTo()<this.currentCount()){this.currentOffset+=this.currentLimit;var e=Se(this.props.id+"-offset",this.currentOffset);window.history.pushState({matestackApp:!0,url:e},null,e),be.$emit(this.props.id+"-update")}},previous:function(){if(-1*(this.currentOffset-this.currentLimit)!=this.currentLimit){this.currentOffset-this.currentLimit<0?this.currentOffset=0:this.currentOffset-=this.currentLimit;var e=Se(this.props.id+"-offset",this.currentOffset);window.history.pushState({matestackApp:!0,url:e},null,e),be.$emit(this.props.id+"-update")}},currentTo:function(){var e=parseInt(this.currentOffset)+parseInt(this.currentLimit);return e>parseInt(this.currentCount())?this.currentCount():e},currentCount:function(){return null!=this.currentFilteredCount||null!=this.currentFilteredCount?this.currentFilteredCount:this.currentBaseCount},goToPage:function(e){this.currentOffset=parseInt(this.currentLimit)*(parseInt(e)-1);var t=Se(this.props.id+"-offset",this.currentOffset);window.history.pushState({matestackApp:!0,url:t},null,t),be.$emit(this.props.id+"-update")}},mounted:function(){null!=De(this.props.id+"-offset")?this.currentOffset=parseInt(De(this.props.id+"-offset")):null!=this.props.init_offset?this.currentOffset=this.props.init_offset:this.currentOffset=0,null!=De(this.props.id+"-limit")?this.currentOffset=parseInt(De(this.props.id+"-limit")):null!=this.props.init_limit?this.currentLimit=this.props.init_limit:this.currentLimit=10,null!=this.props.filtered_count&&(this.currentFilteredCount=this.props.filtered_count,this.currentOffset>=this.currentFilteredCount&&this.previous()),null!=this.props.base_count&&(this.currentBaseCount=this.props.base_count,this.currentOffset>=this.currentBaseCount&&this.previous())}},Oe={methods:{successTransitionHandling:function(e){const t=this;if(null==t.props.success||null==t.props.success.transition||null!=t.props.success.transition.follow_response&&!1!==t.props.success.transition.follow_response||null==t.appNavigateTo)if(null==t.props.success||null==t.props.success.transition||!0!==t.props.success.transition.follow_response||null==t.appNavigateTo)if(null==t.props.success||null==t.props.success.redirect||null!=t.props.success.redirect.follow_response&&!1!==t.props.success.redirect.follow_response)if(null==t.props.success||null==t.props.success.redirect||!0!==t.props.success.redirect.follow_response);else{let t=e.data.redirect_to||e.request.responseURL;window.location.href=t}else{let e=t.props.success.redirect.path;window.location.href=e}else{let r=e.data.transition_to||e.request.responseURL;t.appNavigateTo({url:r,backwards:!1})}else{let e=t.props.success.transition.path;t.appNavigateTo({url:e,backwards:!1})}},failureTransitionHandling:function(e){const t=this;if(null==t.props.failure||null==t.props.failure.transition||null!=t.props.failure.transition.follow_response&&!1!==t.props.failure.transition.follow_response||null==t.appNavigateTo)if(null==t.props.failure||null==t.props.failure.transition||!0!==t.props.failure.transition.follow_response||null==t.appNavigateTo)if(null==t.props.failure||null==t.props.failure.redirect||null!=t.props.failure.redirect.follow_response&&!1!==t.props.failure.redirect.follow_response)if(null==t.props.failure||null==t.props.failure.redirect||!0!==t.props.failure.redirect.follow_response);else{let t=e.response.data.redirect_to||response.request.responseURL;window.location.href=t}else{let e=t.props.failure.redirect.path;window.location.href=e}else{let r=e.response.data.transition_to||response.request.responseURL;t.appNavigateTo({url:r,backwards:!1})}else{let e=t.props.failure.transition.path;t.appNavigateTo({url:e,backwards:!1})}}}},$e={mixins:[Ne,Oe],template:we.inlineTemplate,data:function(){return{data:{},errors:{},loading:!1,isNestedForm:!1,nestedForms:{},nestedFormRuntimeTemplates:{},nestedFormRuntimeTemplateDomElements:{},deletedNestedForms:{}}},setup:()=>({appNavigateTo:t("appNavigateTo",void 0)}),provide:function(){return{parentFormUid:e((()=>this.props.component_uid)),parentFormData:e((()=>this.data)),parentFormErrors:e((()=>this.errors)),parentFormLoading:e((()=>this.loading)),parentNestedForms:e((()=>this.nestedForms)),parentDeletedNestedForms:e((()=>this.deletedNestedForms)),parentNestedFormRuntimeTemplates:e((()=>this.nestedFormRuntimeTemplates)),parentNestedFormRuntimeTemplateDomElements:e((()=>this.nestedFormRuntimeTemplateDomElements)),parentFormMapToNestedForms:this.mapToNestedForms,parentFormSetErrors:this.setErrors,parentFormResetErrors:this.resetErrors,parentFormIsNestedForm:this.isNestedForm,parentNestedFormRuntimeId:null}},methods:{initDataKey:function(e,t){this.data[e]=t},updateFormValue:function(e,t){this.data[e]=t},hasErrors:function(){for(var e in this.errors)if(null!==this.errors[e]&&""!=this.errors[e])return!0;return!1},resetErrors:function(e){this.errors[e]&&delete this.errors[e]},setErrors:function(e){this.errors=e},setErrorKey:function(e,t){this.errors[e]=t},flushErrors:function(e,t){this.errors={}},setNestedFormsError:function(e){let t=this;Object.keys(e).forEach((function(r){if(r.includes(".")){let n=r.split(".")[1],i=r.split(".")[0].split("[")[0],s=r.split(".")[0].split("[")[1].split("]")[0],o=t.mapToNestedForms(parseInt(s),i+"_attributes");t.nestedForms[i+"_attributes"][o].setNestedFormServerErrorIndex(parseInt(s)),t.nestedForms[i+"_attributes"][o].setErrorKey(n,e[r])}}))},mapToNestedForms:function(e,t){var r;r=null!=this.props.primary_key?this.props.primary_key:"id";for(var n=[],i=0;this.data[t].length>i;){1==this.data[t][i]._destroy&&null==this.data[t][i][r]||n.push(i),i++}return n[e]},resetNestedForms:function(){var e=this;Object.keys(e.nestedForms).forEach((function(t){e.nestedForms[t].forEach((function(e){if(1==e.data._destroy)var t=!0;e.initValues(),t&&(e.hideNestedForm=!0,e.data._destroy=!0)}))}))},initValues:function(){this.emitScopedEvent("init")},shouldResetFormOnSuccessfulSubmit(){const e=this;return null!=e.props.success&&null!=e.props.success.reset?e.props.success.reset:e.shouldResetFormOnSuccessfulSubmitByDefault()},shouldResetFormOnSuccessfulSubmitByDefault(){return"put"!=this.props.method},perform:function(){const e=this;if(null==e.props.fields_for)if(this.getRefs().form.checkValidity()){if(e.loading=!0,null!=e.props.emit)e.props.emit.split(",").forEach((e=>be.$emit(e.trim())));null!=e.props.delay?setTimeout((function(){e.sendRequest()}),parseInt(e.props.delay)):e.sendRequest()}else be.$emit("static_form_errors")},transformToFormData:function(e,t,r=null){var n=this;for(let i in t)if(i.endsWith("[]"))for(let s in t[i]){let o=t[i][s];null!=r?e.append(n.props.for+r+"["+i.slice(0,-2)+"][]",o):e.append(n.props.for+"["+i.slice(0,-2)+"][]",o)}else Array.isArray(t[i])?t[i].forEach((function(t,s){if(null!=r){let s=r+"["+i+"][]";e=n.transformToFormData(e,t,s)}else{let r="["+i+"][]";e=n.transformToFormData(e,t,r)}})):null!=t[i]&&(null!=r?e.append(n.props.for+r+"["+i+"]",t[i]):e.append(n.props.for+"["+i+"]",t[i]));return e},sendRequest:function(){const e=this;let t={};t[e.props.for]=e.data;let r={};if(1==e.props.multipart){let t=new FormData;t=this.transformToFormData(t,this.data),r={method:e.props.method,url:e.props.submit_path,data:t,headers:{"X-CSRF-Token":e.getXcsrfToken(),"Content-Type":"multipart/form-data"}}}else r={method:e.props.method,url:e.props.submit_path,data:t,headers:{"X-CSRF-Token":e.getXcsrfToken(),"Content-Type":"application/json"}};Ee(r).then((function(t){(e.loading=!1,null!=e.props.success&&null!=e.props.success.emit)&&e.props.success.emit.split(",").forEach((e=>be.$emit(e.trim(),t.data)));e.successTransitionHandling(t),e.flushErrors(),e.shouldResetFormOnSuccessfulSubmit()&&(e.initValues(),e.resetNestedForms())})).catch((function(t){(e.loading=!1,t.response&&t.response.data&&t.response.data.errors&&(e.errors=t.response.data.errors,e.setErrors(t.response.data.errors),e.setNestedFormsError(t.response.data.errors)),null!=e.props.failure&&null!=e.props.failure.emit)&&e.props.failure.emit.split(",").forEach((e=>be.$emit(e.trim(),t.response.data)));e.failureTransitionHandling(t)}))}},mounted:function(){this.initValues()}},Le={mixins:[$e],template:we.inlineTemplate,methods:{perform:function(){var e;for(var t in this.data,this.data)null!=this.data[t]&&(e=Se(this.props.id+"-filter-"+t,JSON.stringify(this.data[t]),e));e=Se(this.props.id+"-offset",0,e),window.history.pushState({matestackApp:!0,url:e},null,e),be.$emit(this.props.id+"-update")},resetFilter:function(){var e;for(var t in this.data)e=Se(this.props.id+"-filter-"+t,null,e),this.data[t]=null;this.initValues(),window.history.pushState({matestackApp:!0,url:e},null,e),be.$emit(this.props.id+"-update")}},created:function(){var e=this,t=xe();Object.keys(t).forEach((function(r){r.startsWith(e.props.id+"-filter-")&&(e.data[r.replace(e.props.id+"-filter-","")]=JSON.parse(t[r]))}))}},Ae={mixins:[Ne],template:we.inlineTemplate,data:function(){return{ordering:{}}},methods:{toggleOrder:function(e){var t;null==this.ordering[e]?this.ordering[e]="asc":"asc"==this.ordering[e]?this.ordering[e]="desc":"desc"==this.ordering[e]&&(this.ordering[e]=void 0),t=Se(this.props.id+"-order-"+e,this.ordering[e]),t=Se(this.props.id+"-offset",0,t),window.history.pushState({matestackApp:!0,url:t},null,t),be.$emit(this.props.id+"-update"),this.$forceUpdate()},orderIndicator(e,t){return t[this.ordering[e]]}},created:function(){var e=this,t=xe();Object.keys(t).forEach((function(r){r.startsWith(e.props.id+"-order-")&&(e.ordering[r.replace(e.props.id+"-order-","")]=t[r])}))}},Pe={mixins:[Ne],template:we.inlineTemplate,data:function(){return{showing:!0,hide_after_timeout:null,event:{data:{}}}},methods:{show:function(e){const t=this;!0!==this.showing&&(this.showing=!0,this.event.data=e,null!=this.props.hide_after&&(t.hide_after_timeout=setTimeout((function(){t.hide()}),parseInt(this.props.hide_after))))},hide:function(){this.showing=!1,this.event.data={}}},created:function(){const e=this;null!=this.props.show_on&&(this.showing=!1,this.props.show_on.split(",").forEach((t=>be.$on(t.trim(),e.show))));null!=this.props.hide_on&&this.props.hide_on.split(",").forEach((t=>be.$on(t.trim(),e.hide)));null!=this.props.show_on&&(this.showing=!1),1==this.props.init_show&&(this.showing=!0)},beforeUnmount:function(){const e=this;(clearTimeout(e.hide_after_timeout),be.$off(this.props.show_on,e.show),be.$off(this.props.hide_on,e.hide),null!=this.props.show_on)&&this.props.show_on.split(",").forEach((t=>be.$off(t.trim(),e.show)));null!=this.props.hide_on&&this.props.hide_on.split(",").forEach((t=>be.$off(t.trim(),e.hide)))}},Ue={mixins:[Ne],template:we.inlineTemplate,data:function(){return{}},methods:{perform:function(){this.props.public_context?be.$emit(this.props.emit,{public_context:this.props.public_context}):be.$emit(this.props.emit,this.props.data)}}},je={mixins:[Ne],template:we.inlineTemplate,data:function(){return{}},inject:["appNavigateTo","currentPathName","setPageLoading","pageLoading"],computed:{isActive(){return this.props.link_path.split("?")[0]===this.currentPathName},isChildActive(){return this.props.link_path.split("?")[0]!==this.currentPathName&&-1!==this.currentPathName.indexOf(this.props.link_path.split("?")[0])}},methods:{navigateTo:function(e){const t=this;be.$emit("page_loading_triggered",e),this.setPageLoading(!0),null!=t.props.delay?setTimeout((function(){t.performNavigation(e)}),parseInt(t.props.delay)):this.performNavigation(e)},performNavigation:function(e){this.appNavigateTo({url:e,backwards:!1})}}},ze={mixins:[Ne],template:we.inlineTemplate,data:function(){return{asyncTemplate:null,showing:!0,loading:!1,hideAfterTimeout:null,event:{data:{}}}},methods:{show:function(e){const t=this;!0!==this.showing&&(this.showing=!0,this.event.data=e,null!=this.props.defer&&(isNaN(this.props.defer)||this.startDefer()),null!=this.props.hide_after&&(t.hideAfterTimeout=setTimeout((function(){t.hide()}),parseInt(this.props.hide_after))))},hide:function(){this.showing=!1,this.event.data={}},startDefer:function(){const e=this;e.loading=!0,setTimeout((function(){e.rerender()}),parseInt(this.props.defer))},rerender:function(){var e=this;e.loading=!0,Ee({method:"get",url:location.pathname+location.search,headers:{"X-CSRF-Token":e.getXcsrfToken()},params:{component_key:e.props.component_key,component_class:e.props.parent_class,public_context:e.props.public_context}}).then((function(t){var r=document.createElement("div");r.innerHTML=t.data;var n=r.querySelector("#"+e.props.component_key).outerHTML;e.loading=!1,e.asyncTemplate=n})).catch((function(t){be.$emit("async_rerender_error",{id:e.props.component_key})}))}},created:function(){const e=this;e.registerEvents(this.props.show_on,e.show),e.registerEvents(this.props.hide_on,e.hide),e.registerEvents(this.props.rerender_on,e.rerender),null!=this.props.show_on&&(this.showing=!1),null!=this.props.defer&&(isNaN(this.props.defer)||null==this.props.show_on&&this.startDefer()),1==this.props.init_show&&(this.showing=!0)},beforeUnmount:function(){const e=this;clearTimeout(e.hideAfterTimeout),e.removeEvents(this.props.show_on,e.show),e.removeEvents(this.props.hide_on,e.hide),e.removeEvents(this.props.rerender_on,e.rerender)}},Ve={mixins:[Ne,Oe],template:we.inlineTemplate,data:function(){return{}},setup:()=>({appNavigateTo:t("appNavigateTo",void 0)}),methods:{perform:function(){const e=this;if(null==e.props.confirm||confirm(e.props.confirm_text)){if(null!=e.props.emit)e.props.emit.split(",").forEach((e=>be.$emit(e.trim())));null!=e.props.delay?setTimeout((function(){e.sendRequest()}),parseInt(e.props.delay)):this.sendRequest()}},sendRequest:function(){const e=this;Ee({method:e.props.method,url:e.props.action_path,data:e.props.data,headers:{"X-CSRF-Token":e.getXcsrfToken()}}).then((function(t){null!=e.props.success&&null!=e.props.success.emit&&e.props.success.emit.split(",").forEach((e=>be.$emit(e.trim(),t.data)));e.successTransitionHandling(t)})).catch((function(t){null!=e.props.failure&&null!=e.props.failure.emit&&e.props.failure.emit.split(",").forEach((e=>be.$emit(e.trim(),t.response.data)));e.failureTransitionHandling(t)}))}}},qe={mixins:[Ne],template:we.inlineTemplate,props:{initialTemplate:String},data:function(){return{cableTemplate:null,cableTemplateDomElement:null,loading:!1,event:{data:{}}}},methods:{append:function(e){var t=this.formatPayload(e);this.cableTemplateDomElement.insertAdjacentHTML("beforeend",t.join("")),this.updateCableTemplate()},prepend:function(e){var t=this.formatPayload(e);this.cableTemplateDomElement.insertAdjacentHTML("afterbegin",t.join("")),this.updateCableTemplate()},delete:function(e){this.formatPayload(e).forEach((e=>this.cableTemplateDomElement.querySelector("#"+e).remove())),this.updateCableTemplate()},update:function(e){const t=this;this.formatPayload(e).forEach((function(e){var r=document.createElement("div");r.innerHTML=e.replace(/^\s+|\s+$/g,"");var n=r.firstChild.id,i=t.cableTemplateDomElement.querySelector("#"+n);i.parentNode.replaceChild(r.firstChild,i)})),this.updateCableTemplate()},replace:function(e){var t=this.formatPayload(e);this.cableTemplateDomElement.innerHTML=t.join(""),this.updateCableTemplate()},updateCableTemplate:function(){this.cableTemplate=this.cableTemplateDomElement.outerHTML},formatPayload:function(e){return Array.isArray(e.data)?e.data:[e.data]}},mounted:function(){const e=this;var t=document.createElement("div");t.innerHTML=this.initialTemplate,this.cableTemplateDomElement=t.querySelector("#"+this.props.id),this.cableTemplate=this.cableTemplateDomElement.outerHTML,this.registerEvents(this.props.append_on,e.append),this.registerEvents(this.props.prepend_on,e.prepend),this.registerEvents(this.props.delete_on,e.delete),this.registerEvents(this.props.update_on,e.update),this.registerEvents(this.props.replace_on,e.replace)},beforeUnmount:function(){const e=this;this.cableTemplate=null,this.removeEvents(this.props.append_on,e.append),this.removeEvents(this.props.prepend_on,e.prepend),this.removeEvents(this.props.delete_on,e.delete),this.removeEvents(this.props.update_on,e.update),this.removeEvents(this.props.replace_on,e.replace)}},He={mixins:[Ne],template:we.inlineTemplate,data:()=>({originalDisplayValue:"",dropPerformInProgress:!1}),methods:{onDragStart:function(e){let t=this;this.props.emit_on_drag_start&&be.$emit(this.props.emit_on_drag_start,{draggable_id:this.props.draggable_id,drag_key:this.props.drag_key,draggable_element:this.getElement()}),e.dataTransfer.effectAllowed="move";let r={draggable_id:this.props.draggable_id,drag_key:this.props.drag_key};e.dataTransfer.setData("text/plain",JSON.stringify(r)),this.originalDisplayValue=this.getElement().style.display,setTimeout((()=>{t.getElement().style.display="none"}),0)},onDragEnd:function(e){this.props.emit_on_drag_end&&be.$emit(this.props.emit_on_drag_end,{draggable_id:this.props.draggable_id,drag_key:this.props.drag_key,draggable_element:this.getElement()}),this.getElement().style.display=this.originalDisplayValue,this.dropPerformInProgress?(this.getElement().style.opacity=.1,this.getElement().draggable=!1,this.getElement().disabled=!0):this.getElement().style.opacity=1},setDropPerformInProgress:function(e){e.draggableId==this.props.draggable_id&&(this.dropPerformInProgress=!0)},unsetDropPerformInProgress:function(e){e.draggableId==this.props.draggable_id&&(this.dropPerformInProgress=!1)}},mounted(){be.$on(this.props.drag_key+"_drop_perform_in_progress",this.setDropPerformInProgress),be.$on(this.props.drag_key+"_drop_perform_done",this.unsetDropPerformInProgress)},beforeUnmount(){be.$off(this.props.drag_key+"_drop_perform_in_progress",this.setDropPerformInProgress),be.$off(this.props.drag_key+"_drop_perform_done",this.unsetDropPerformInProgress)}},Be={mixins:[Ne],template:we.inlineTemplate,data:()=>({highlighted:!1,hovered:!1}),methods:{highlight:function(e){e.drag_key==this.props.drag_key&&(this.highlighted=!0)},disableHighlight:function(e){e.drag_key==this.props.drag_key&&(this.highlighted=!1)},getHighlightClass:function(){return this.props.highlight_class},getHoveredClass:function(){return this.props.hover_class},onDrop:function(e){let t=JSON.parse(e.dataTransfer.getData("text/plain"));return t.drag_key==this.props.drag_key&&this.perform(t),this.hovered=!1,this.highlighted=!1,e.preventDefault&&e.preventDefault(),!1},onDragEnter:function(e){return e.preventDefault&&e.preventDefault(),this.hovered=!0,!1},onDragLeave:function(e){this.hovered=!1},onDragOver:function(e){return e.preventDefault&&e.preventDefault(),this.hovered=!0,!1},perform:function(e){let t=this,r=this.props.data;r.draggable_id=e.draggable_id,be.$emit(t.props.drag_key+"_drop_perform_in_progress",{draggableId:r.draggable_id}),Ee({method:this.props.method,url:this.props.path,data:r,headers:{"X-CSRF-Token":document.getElementsByName("csrf-token")[0].getAttribute("content")}}).then((function(e){null!=t.props.success&&null!=t.props.success.emit&&be.$emit(t.props.success.emit,e.data),be.$emit(t.props.drag_key+"_drop_perform_done",{draggableId:r.draggable_id})})).catch((function(e){null!=t.props.failure&&null!=t.props.failure.emit&&be.$emit(t.props.failure.emit,e.response.data),be.$emit(t.props.drag_key+"_drop_perform_done",{draggableId:r.draggable_id})}))}},mounted(){this.props.highlight_on&&be.$on(this.props.highlight_on,this.highlight),this.props.disable_highlight_on&&be.$on(this.props.disable_highlight_on,this.disableHighlight)},beforeUnmount(){this.props.highlight_on&&be.$off(this.props.highlight_on,this.highlight),this.props.disable_highlight_on&&be.$off(this.props.disable_highlight_on,this.disableHighlight)}},Me={mixins:[Ne],props:["props","params"],template:we.inlineTemplate,data:function(){return{isolatedTemplate:null,loading:!1,loadingError:!1,hideCurrentContent:!1}},methods:{replace:function(e){this.hideCurrentContent=!0,this.rerender(e)},rerender:function(e){var t=this;null==t.props.public_context&&null!=e&&null!=e.public_context&&(t.props.public_context={}),null!=e&&null!=e.public_context&&(t.props.public_context=e.public_context),t.loading=!0,t.loadingError=!1,null!=t.props.rerender_delay?setTimeout((function(){t.renderIsolatedContent()}),parseInt(this.props.rerender_delay)):t.renderIsolatedContent()},renderIsolatedContent:function(){var e=this;e.loading=!0,e.loadingError=!1,Ee({method:"get",url:location.pathname+location.search,headers:{"X-CSRF-Token":e.getXcsrfToken()},params:{component_class:e.props.component_class,public_context:e.props.public_context}}).then((function(t){e.loading=!1,e.loadingStart=!1,e.loadingEnd=!0,e.hideCurrentContent=!1,e.isolatedTemplate=t.data})).catch((function(t){e.loadingError=!0,be.$emit("isolate_rerender_error",{class:e.props.component_class})}))},startDefer:function(){const e=this;e.loading=!0,setTimeout((function(){e.renderIsolatedContent()}),parseInt(this.props.defer))}},created:function(){},beforeUnmount:function(){const e=this;null!=this.props.rerender_on&&this.props.rerender_on.split(",").forEach((t=>be.$off(t.trim(),e.rerender)));null!=this.props.init_on&&this.props.rerender_on.split(",").forEach((t=>be.$off(t.trim(),e.renderIsolatedContent)));null!=this.props.replace_on&&this.props.replace_on.split(",").forEach((t=>be.$off(t.trim(),e.replace)))},mounted:function(){const e=this;void 0===this.props.init_on||null===this.props.init_on?(1==e.props.defer||Number.isInteger(e.props.defer))&&(isNaN(e.props.defer)?e.renderIsolatedContent():e.startDefer()):null!=e.props.defer?isNaN(e.props.defer)||this.props.init_on.split(",").forEach((t=>be.$on(t.trim(),e.startDefer))):this.props.init_on.split(",").forEach((t=>be.$on(t.trim(),e.renderIsolatedContent)));null!=this.props.rerender_on&&this.props.rerender_on.split(",").forEach((t=>be.$on(t.trim(),e.rerender)));null!=this.props.replace_on&&this.props.replace_on.split(",").forEach((t=>be.$on(t.trim(),e.replace)))}},Xe={mixins:[Ne],template:we.inlineTemplate,data:function(){return{data:{},errors:{},isNestedForm:!0,hideNestedForm:!1,nestedFormRuntimeId:"",nestedFormServerErrorIndex:""}},provide:function(){return{parentFormUid:e((()=>this.props.component_uid)),parentFormData:e((()=>this.data)),parentFormErrors:e((()=>this.errors)),parentNestedFormRuntimeId:e((()=>this.nestedFormRuntimeId)),parentFormMapToNestedForms:this.mapToNestedForms,parentFormSetErrors:this.setErrors,parentFormResetErrors:this.resetErrors}},inject:["parentFormData","parentFormErrors","parentNestedForms","parentDeletedNestedForms","parentFormMapToNestedForms"],methods:{initDataKey:function(e,t){this.data[e]=t},updateFormValue:function(e,t){this.data[e]=t},hasErrors:function(){for(var e in this.errors)if(null!==this.errors[e]&&""!=this.errors[e])return!0;return!1},resetErrors:function(e){this.errors[e]&&delete this.errors[e];var t=this.props.fields_for.replace("_attributes","")+"["+this.nestedFormServerErrorIndex+"]."+e;this.parentFormErrors[t]&&delete this.parentFormErrors[t]},setErrors:function(e){this.errors=e},setNestedFormServerErrorIndex:function(e){this.nestedFormServerErrorIndex=e},setErrorKey:function(e,t){this.errors[e]=t},flushErrors:function(e,t){this.errors={}},removeItem:function(){this.data._destroy=!0,this.hideNestedForm=!0;var e=parseInt(this.nestedFormRuntimeId.replace("_"+this.props.fields_for+"_child_",""));this.parentDeletedNestedForms[this.props.fields_for].push(e);var t=this.props.fields_for.replace("_attributes","")+"["+this.nestedFormServerErrorIndex+"].",r=this;Object.keys(r.parentFormErrors).forEach((function(e){0==e.lastIndexOf(t,0)&&delete r.parentFormErrors[e]}))},initValues:function(){this.emitScopedEvent("init")}},mounted:function(){var e=this;this.data={_destroy:!1},null==this.parentFormData[this.props.fields_for]&&(this.parentFormData[this.props.fields_for]=[]),null==this.parentNestedForms[this.props.fields_for]&&(this.parentNestedForms[this.props.fields_for]=[]),null==this.parentDeletedNestedForms[this.props.fields_for]&&(this.parentDeletedNestedForms[this.props.fields_for]=[]);var t=parseInt(e.getTemplateElement().querySelector(".matestack-form-fields-for").id.replace(this.props.fields_for+"_child_",""));isNaN(t)&&(t=this.parentNestedForms[this.props.fields_for].length,this.nestedFormRuntimeId="_"+this.props.fields_for+"_child_"+t,this.getTemplateElement().id=this.props.fields_for+"_child_"+t,this.initValues(),this.parentFormData[this.props.fields_for].push(this.data),this.parentNestedForms[this.props.fields_for].push(this)),isNaN(t)||(this.nestedFormRuntimeId="_"+this.props.fields_for+"_child_"+t,null==this.parentFormData[this.props.fields_for][t]?(this.initValues(),this.parentFormData[this.props.fields_for].push(this.data),this.parentNestedForms[this.props.fields_for].push(this)):(this.data=this.parentFormData[this.props.fields_for][t],1==this.data._destroy&&(this.hideNestedForm=!0),this.parentNestedForms[this.props.fields_for][t]=this,Object.keys(this.parentFormErrors).forEach((function(r){if(r.includes(".")){let n=r.split(".")[1],i=r.split(".")[0].split("[")[0],s=r.split(".")[0].split("[")[1].split("]")[0],o=e.parentFormMapToNestedForms(parseInt(s),i+"_attributes");i+"_attributes"==e.props.fields_for&&o==t&&(e.setNestedFormServerErrorIndex(parseInt(s)),e.setErrorKey(n,e.parentFormErrors[r]))}}))))}},Je={mixins:[Ne],template:we.inlineTemplate,data:function(){return{}},inject:["parentNestedFormRuntimeTemplates","parentNestedFormRuntimeTemplateDomElements","parentNestedForms"],methods:{addItem:function(e){var t=JSON.parse(this.getTemplateElement().querySelector("#prototype-template-for-"+e).dataset[":template"]),r=t.matchAll(/&quot;component_uid&quot;:&quot;(.+?)&quot;/g),n=[];for(const e of r)n.push(e[1]);if(n.forEach((function(e){var r=Math.floor(1e9*Math.random());t=t.replaceAll(e,r)})),document.createElement("div").innerHTML=t,null==this.parentNestedFormRuntimeTemplateDomElements[e]){(i=document.createElement("div")).innerHTML=t,s=null==this.parentNestedForms[e]?0:this.parentNestedForms[e].length,i.querySelector(".matestack-form-fields-for").id=e+"_child_"+s,this.parentNestedFormRuntimeTemplateDomElements[e]=i,this.parentNestedFormRuntimeTemplates[e]=this.parentNestedFormRuntimeTemplateDomElements[e].outerHTML}else{var i;(i=document.createElement("div")).innerHTML=t;var s=this.parentNestedForms[e].length;i.querySelector(".matestack-form-fields-for").id=e+"_child_"+s,this.parentNestedFormRuntimeTemplateDomElements[e].insertAdjacentHTML("beforeend",i.innerHTML),this.parentNestedFormRuntimeTemplates[e]=this.parentNestedFormRuntimeTemplateDomElements[e].outerHTML}}}},We={inject:["parentFormUid","parentFormData","parentFormErrors","parentFormLoading","parentFormIsNestedForm","parentFormResetErrors","parentNestedFormRuntimeId"],methods:{initialize:function(){const e=this;for(let t in e.getRefs()){let r,n;(t.startsWith("select.")||t.startsWith("input."))&&(r=e.getRefs()[t].attributes["init-value"],n=e.getRefs()[t].attributes["value-type"]),t.startsWith("select.")?t.startsWith("select.multiple.")?(e.parentFormData[t.replace("select.multiple.","")]=null,r?(e.setValue(JSON.parse(r.value)),e.afterInitialize(JSON.parse(r.value))):(e.setValue([]),e.afterInitialize([]))):(e.parentFormData[t.replace("select.","")]=null,r?n&&"Integer"==n.value?(e.setValue(parseInt(r.value)),e.afterInitialize(parseInt(r.value))):(e.setValue(r.value),e.afterInitialize(r.value)):(e.setValue(null),e.afterInitialize(null))):(e.parentFormData[t.replace("input.","")]=null,r?("true"===r.value&&(e.setValue(!0),e.afterInitialize(!0)),"false"===r.value&&(e.setValue(!1),e.afterInitialize(!1))):(e.setValue(null),e.afterInitialize(null)))}},inputChanged:function(e){this.parentFormIsNestedForm&&(this.parentFormData._destroy=!1),this.parentFormResetErrors(e)},afterInitialize:function(e){},setValue:function(e){this.parentFormData[this.props.key]=e}},mounted:function(){this.registerScopedEvent("init",this.initialize,this.parentFormUid)},beforeUnmount:function(){this.removeScopedEvent("init",this.initialize,this.parentFormUid)}},Ke={mixins:[Ne,We],template:we.inlineTemplate,data:()=>({})},Ge={inject:["parentFormUid","parentFormData","parentFormErrors","parentFormLoading","parentFormIsNestedForm","parentFormResetErrors","parentNestedFormRuntimeId"],methods:{initialize:function(){const e=this;for(let t in e.getRefs())if(t.startsWith("input.")){let r=e.getRefs()[t].attributes["init-value"];e.parentFormData[t.replace("input.","")]=null,r?(e.setValue(r.value),e.afterInitialize(r.value)):(e.setValue(null),e.afterInitialize(null))}},filesAdded:function(e){const t=(event.dataTransfer||event.target).files;if(event.target.attributes.multiple){this.parentFormData[e]=[];for(let r in t)t[r]instanceof File&&this.parentFormData[e].push(t[r])}else this.parentFormData[e]=t[0]},inputChanged:function(e){this.parentFormIsNestedForm&&(this.parentFormData._destroy=!1),this.parentFormResetErrors(e)},afterInitialize:function(e){},setValue:function(e){this.getRefs()["input."+this.props.key]&&(this.getRefs()["input."+this.props.key].value=e),this.getRefs()["input."+this.props.key+"[]"]&&(this.getRefs()["input."+this.props.key+"[]"].value=e),this.parentFormData[this.props.key]=e}},mounted:function(){this.registerScopedEvent("init",this.initialize,this.parentFormUid)},beforeUnmount:function(){this.removeScopedEvent("init",this.initialize,this.parentFormUid)}},Qe={mixins:[Ne,Ge],template:we.inlineTemplate,data:()=>({})},Ye={inject:["parentFormUid","parentFormData","parentFormErrors","parentFormLoading","parentFormIsNestedForm","parentFormResetErrors","parentNestedFormRuntimeId"],methods:{initialize:function(){const e=this;for(let t in e.getRefs()){let r,n;t.startsWith("select.")&&(r=e.getRefs()[t].attributes["init-value"],n=e.getRefs()[t].attributes["value-type"]),t.startsWith("select.")&&(t.startsWith("select.multiple.")?(e.parentFormData[t.replace("select.multiple.","")]=null,r?(e.setValue(JSON.parse(r.value)),e.afterInitialize(JSON.parse(r.value))):(e.setValue([]),e.afterInitialize([]))):(e.parentFormData[t.replace("select.","")]=null,r?n&&"Integer"==n.value?(e.setValue(parseInt(r.value)),e.afterInitialize(parseInt(r.value))):(e.setValue(r.value),e.afterInitialize(r.value)):(e.setValue(null),e.afterInitialize(null))))}},inputChanged:function(e){this.parentFormIsNestedForm&&(this.parentFormData._destroy=!1),this.parentFormResetErrors(e)},afterInitialize:function(e){},setValue:function(e){this.parentFormData[this.props.key]=e}},mounted:function(){this.registerScopedEvent("init",this.initialize,this.parentFormUid)},beforeUnmount:function(){this.removeScopedEvent("init",this.initialize,this.parentFormUid)}},Ze={mixins:[Ne,Ye],template:we.inlineTemplate,data:()=>({})},et={inject:["parentFormUid","parentFormData","parentFormErrors","parentFormLoading","parentFormIsNestedForm","parentFormResetErrors","parentNestedFormRuntimeId"],methods:{initialize:function(){const e=this;for(let t in e.getRefs()){let r,n;t.startsWith("select.")&&(r=e.getRefs()[t].attributes["init-value"],n=e.getRefs()[t].attributes["value-type"]),t.startsWith("select.")&&(t.startsWith("select.multiple.")?(e.parentFormData[t.replace("select.multiple.","")]=null,r?(e.setValue(JSON.parse(r.value)),e.afterInitialize(JSON.parse(r.value))):(e.setValue([]),e.afterInitialize([]))):(e.parentFormData[t.replace("select.","")]=null,r?n&&"Integer"==n.value?(e.setValue(parseInt(r.value)),e.afterInitialize(parseInt(r.value))):(e.setValue(r.value),e.afterInitialize(r.value)):(e.setValue(null),e.afterInitialize(null))))}},inputChanged:function(e){this.parentFormIsNestedForm&&(this.parentFormData._destroy=!1),this.parentFormResetErrors(e)},afterInitialize:function(e){},setValue:function(e){this.parentFormData[this.props.key]=e}},mounted:function(){this.registerScopedEvent("init",this.initialize,this.parentFormUid)},beforeUnmount:function(){this.removeScopedEvent("init",this.initialize,this.parentFormUid)}},tt={mixins:[Ne,et],template:we.inlineTemplate,data:()=>({})},rt={inject:["parentFormUid","parentFormData","parentFormErrors","parentFormLoading","parentFormIsNestedForm","parentFormResetErrors","parentNestedFormRuntimeId"],methods:{initialize:function(){const e=this;for(let t in this.getRefs())if(t.startsWith("input.")){let r=e.getRefs()[t].attributes["init-value"];e.parentFormData[t.replace("input.","")]=null,r?(e.setValue(r.value),e.afterInitialize(r.value)):(e.setValue(null),e.afterInitialize(null))}},inputChanged:function(e){this.parentFormIsNestedForm&&(this.parentFormData._destroy=!1),this.parentFormResetErrors(e)},afterInitialize:function(e){},setValue:function(e){this.parentFormData[this.props.key]=e}},mounted:function(){this.registerScopedEvent("init",this.initialize,this.parentFormUid)},beforeUnmount:function(){this.removeScopedEvent("init",this.initialize,this.parentFormUid)}},nt={mixins:[Ne,rt],template:we.inlineTemplate,data:()=>({})},it=function(e){return e.config.compilerOptions.whitespace="preserve",e.config.compilerOptions.isCustomElement=e=>"matestack-component-template"===e,e.config.unwrapInjectedRef=!0,e.component("matestack-ui-core-runtime-render",Re),e.component("matestack-ui-core-app",ke),e.component("matestack-ui-core-page-switch",Ie),e.component("matestack-ui-core-collection-content",Ce),e.component("matestack-ui-core-collection-filter",Le),e.component("matestack-ui-core-collection-order",Ae),e.component("matestack-ui-core-draggable",He),e.component("matestack-ui-core-drop-zone",Be),e.component("matestack-ui-core-toggle",Pe),e.component("matestack-ui-core-onclick",Ue),e.component("matestack-ui-core-transition",je),e.component("matestack-ui-core-async",ze),e.component("matestack-ui-core-action",Ve),e.component("matestack-ui-core-cable",qe),e.component("matestack-ui-core-isolate",Me),e.component("matestack-ui-core-form",$e),e.component("matestack-ui-core-form-checkbox",Ke),e.component("matestack-ui-core-form-input",Qe),e.component("matestack-ui-core-form-radio",Ze),e.component("matestack-ui-core-form-select",tt),e.component("matestack-ui-core-form-textarea",nt),e.component("matestack-ui-core-form-nested-form",Xe),e.component("matestack-ui-core-form-fields-for-add-item",Je),e},st={axios:Ee,eventHub:be,matestackEventHub:be,componentMixin:Ne,componentHelpers:we,formInputMixin:Ge,formSelectMixin:et,formCheckboxMixin:We,formTextareaMixin:rt,formRadioMixin:Ye,registerComponents:it,mount:function(e,t="#matestack-ui"){return 1!=window.matestackAppMounted&&(window.matestackAppMounted=!0,it(e),e.mount(t)),e}};export{st as default};
